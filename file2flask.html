<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<body>
<form method="post">
<input type="file" name="file" id="document">
</form>
<button id="s" onclick="send_data()">Submit</button>
<script>
	

	// var formData = new FormData();
	// formData.append("user_file",document.getElementById("document").files[0])
	// 	$('#s').on('click', function() {
	// 	console.log(document.getElementById("document").files[0])
	// 	console.log("Hi")
	// 	$.ajax({
	//     url: 'http://127.0.0.1:5000/',
	//     crossDomain: true,
	//     type: 'post',
	//     contentType: 'application/json',
	//     data: document.getElementById("document").files[0],
	//     processData: false,
	//     success: function( data, textStatus, jQxhr ){
	//         alert("Success")
	//     },
	//     error: function( jqXhr, textStatus, errorThrown ){
	//         console.log( errorThrown );
	//     }
	// });
		// var xhr = new XMLHttpRequest();
		// xhr.open("POST", "http://127.0.0.1:5000/hello", true);
		// xhr.onload = function () {
		//     console.log(xhr.responseText);
		// };
		// xhr.send("file=",document.getElementById("document").files);

	// });

	// function getCookie(name)
	// {
	//     alert("In function");
	//     var cookieValue = null;
	//     if (document.cookie && document.cookie != '') {
	//         var cookies = document.cookie.split(';');
	//         for (var i = 0; i < cookies.length; i++) {
	//             var cookie = jQuery.trim(cookies[i]);
	//             // Does this cookie string begin with the name we want?

	//             if (cookie.substring(0, name.length + 1) == (name + '=')) {
	//                 cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
	//                 break;
	//             }
	//         }
	//     }
	//     return cookieValue;
	// }


	    // $(document).ready(function() {
	//        $("#s").click(function(event){
	//             alert("Ajax call started");

	            
	//             formData.append("user_file",document.getElementById("document").files[0])
	//             $.ajaxSetup({

	//             beforeSend: function(xhr, settings) {
	//             alert("Hi");
	//             if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
	//              // Only send the token to relative URLs i.e. locally.
	//              xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
	//          }
	//      }
	// });
	//             $.ajax({
	//                  type:"POST",
	//                  url:"http://127.0.0.1:5000/hello",
	//                  data: formData,
	//                  success: function(data){
	//                      alert("Success");
	//                      alert(data);
	//                  },
	//                  error:function(errorThrown){
	//                     console.log(errorThrown);
	//                  }

	//             });

	//             return false; //<---- move it here
	//        });

	// });
	function send_data(){

		var formData = new FormData();
		formData.append("user_file",document.getElementById("document").files[0])
		var request = new XMLHttpRequest();
		request.open("POST", "http://127.0.0.1:5000/hello");
		request.send(formData);	

		// var request = new XMLHttpRequest();
		// // var params = "action=something";
		// request.open('POST', "http://127.0.0.1:5000/hello", true);
		// request.onreadystatechange = function() {if (request.readyState==4) alert("It worked!");};
		// request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		// // request.setRequestHeader("Content-length", params.length);
		// request.setRequestHeader("Connection", "close");
		// request.send(formData);

	}
	




	
</script>
</body>